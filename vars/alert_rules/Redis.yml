---
prometheus_redis_alert_rules:
# Redis in-memory store
  - alert: Redis_Instance
    expr: "redis_up == 0"
    for: 5m
    labels:
      severity: critical
    annotations:
      description: "Redis has been stoped."
#  - alert: Redis_Backup
#    expr: "time() - redis_rdb_last_save_timestamp_seconds > 60 * 60 * 24"
#    for: 60m
#    labels:
#      severity: warning
#    annotations:
#      description: "Redis has not been backuped for 24 hours."
  - alert: Redis_Rejected
    expr: "increase(redis_rejected_connections_total[1m]) > 0"
    for: 60m
    labels:
      severity: warning
    annotations:
      description: "Some connections to Redis has been rejected."
  - alert: Redis_RAM_Usage
    expr: "redis_memory_used_bytes / redis_total_system_memory_bytes * 100 > 90"
    for: 10m
    labels:
      severity: warning
    annotations:
      description: 'Redis Memory usage has exceeded the threshold with a value of {{ $value | printf "%.2f" }}%.'
  - alert: Redis_Rep
    expr: "delta(redis_connected_slaves[1m]) < 0"
    for: 10m
    labels:
      severity: warning
    annotations:
      description: 'Redis instance lost a slave.'
